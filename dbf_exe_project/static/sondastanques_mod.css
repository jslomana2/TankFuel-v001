:root{
    --text:#e7eef6; --muted:#a6b8c9;
    --line:#22374a; --line2:#2a4960;
    --ok:#16a34a; --warn:#f59e0b; --bad:#ef4444; --water:#3aa1ff;
    --accent:#2aa8ff;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:
    radial-gradient(1200px 800px at 18% -10%, #11283f, transparent 60%),
    radial-gradient(900px 600px at 82% -10%, #173a57, transparent 65%),
    linear-gradient(180deg, #0a1220, #070d16 40%, #060a12);
    color:var(--text);
    font:14px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  .wrap{max-width:1400px;margin:0 auto}
  header{position:sticky; top:0; z-index:10; background:#fff; color:#0b1220; border-bottom:1px solid #e6e9ee;}
  .h-inner{display:flex;align-items:center;gap:12px;padding:10px 16px;flex-wrap:wrap}
  .brand img{height:26px;display:block}
  .title{font-weight:700;letter-spacing:.2px}
  .pill{padding:4px 10px;border-radius:999px;background:#f6f7f9;color:#3b4251;font-size:12px;border:1px solid #e6e9ee}
  .spacer{flex:1}
  .ctrls{display:flex;align-items:center;gap:8px}
  select,button{background:#0b1220; color:#fff; border:0; padding:8px 12px; font-size:13px; border-radius:999px; cursor:pointer;}
  select{background:#0b1220 url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2212%22 height=%228%22><path d=%22M1 1l5 5 5-5%22 stroke=%22white%22 fill=%22none%22 stroke-width=%222%22/></svg>') no-repeat right 10px center; padding-right:28px; appearance:none; -webkit-appearance:none; }
  button:hover,select:hover{filter:brightness(1.1)}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:16px;padding:14px 16px}
  .card{
    --sel: var(--accent);
    --selGlow: rgba(42,168,255,.55);
    background:linear-gradient(180deg,#101f2e,#0c1a28);
    border:1px solid var(--line);
    border-radius:16px;
    padding:14px;
    display:grid;grid-template-columns:auto 1fr;gap:14px;align-items:center;
    position:relative;overflow:visible; transition:box-shadow .15s ease, outline-color .15s ease, transform .12s ease;
  }
  .card:hover{ transform: translateY(-1px); }
  .card.sel{
    outline:2px solid var(--sel);
    box-shadow:
      0 0 0 2px var(--sel),
      0 0 32px var(--selGlow),
      0 12px 28px rgba(0,0,0,.35);
  }
  .tankWrap{position:relative; width:clamp(120px, 24vw, 170px); padding-left:52px}
  .scale{ position:absolute; left:0; top:6px; bottom:6px; width:52px; color:var(--muted); font-size:clamp(10px, 1.4vw, 12px); display:flex; flex-direction:column; justify-content:space-between; text-align:right; font-weight:600; text-shadow:0 1px 1px rgba(0,0,0,.5) }
  .scale .tick{ display:flex; align-items:center; gap:8px; justify-content:flex-end }
  .scale .line{ width:16px; height:1px; background:var(--line2) }
  .tank{position:relative; width:100%; aspect-ratio:0.62; background:linear-gradient(90deg,#0b1a27 0%,#183447 10%,#091724 38%,#20465d 55%,#0a1622 75%,#173246 100%); border:1px solid var(--line2); border-radius:18px 18px 12px 12px; box-shadow:inset 0 14px 20px rgba(255,255,255,.06), inset 0 -10px 22px rgba(0,0,0,.6), 0 16px 26px rgba(0,0,0,.35); overflow:hidden;}
  .gloss{position:absolute; inset:0; pointer-events:none; background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,0) 40%), linear-gradient(120deg, rgba(255,255,255,.15), rgba(255,255,255,0) 40%); mix-blend-mode:screen;}
  .stripe{position:absolute; top:0; bottom:0; left:0; width:28%; background:linear-gradient(90deg, rgba(255,255,255,.22), rgba(255,255,255,.04) 60%, transparent 100%); mix-blend-mode:screen; opacity:.22; transform:skewX(-5deg) translateX(6px);}
  .liquid{position:absolute; left:2px; right:2px; bottom:2px; height:0%; background:linear-gradient(180deg,var(--fillLight), var(--fill)); border-radius:12px 12px 10px 10px/ 16px 16px 10px 10px; box-shadow:inset 0 10px 22px rgba(255,255,255,.2), inset 0 -8px 16px rgba(0,0,0,.35); overflow:hidden;}
  .liquid .wave{ position:absolute; left:-200%; width:400%; height:140%; top:-20%; opacity:.30; background: radial-gradient(50% 70% at 20% 40%, rgba(255,255,255,.8), transparent 60%), radial-gradient(50% 70% at 60% 60%, rgba(255,255,255,.8), transparent 60%); animation:drift 9s linear infinite }
  .liquid .wave2{ opacity:.20; animation-duration:13s; transform:scaleY(.92) translateY(-6%) }
  .liquid .wave3{ opacity:.16; animation-duration:18s; transform:scaleY(.85) translateY(-10%) }
  @keyframes drift { to { transform:translateX(50%) } }
  .water{ position:absolute; left:2px; right:2px; bottom:2px; height:6px; background:linear-gradient(180deg,#8fd0ff,#3aa1ff); border-radius:0 0 10px 10px; box-shadow:inset 0 1px 0 rgba(255,255,255,.4) }
  .pct{ position:absolute; top:6px; right:6px; font-weight:700; font-size:clamp(11px,1.4vw,13px); color:#fff; background:rgba(0,0,0,.35); padding:4px 7px; border-radius:8px; border:1px solid rgba(255,255,255,.2) }
  .name{ font-weight:700; font-size:clamp(13px,1.6vw,15px) }
  .status{display:inline-flex;align-items:center;gap:6px;font-size:12px}
  .dot{width:9px;height:9px;border-radius:50%}
  .spark{width:100%;height:38px}
  .kv{display:grid;grid-template-columns:auto auto;gap:8px 16px;margin-top:6px;font-size:12px;color:var(--muted)}
  .kv strong{color:var(--text);font-weight:600}
  #totales{padding:2px 16px 0;overflow-x:auto;white-space:nowrap}
  .tchip{display:inline-flex;align-items:center;gap:8px;margin:0 8px 0 0;padding:8px 12px;border-radius:999px;border:1px solid var(--line);background:rgba(255,255,255,.04);font-size:12px}
  .tchip .sw{width:14px;height:14px;border-radius:50%;border:1px solid rgba(255,255,255,.3)}
  .tchip strong{margin-left:2px}
  footer{margin:6px 16px 14px;color:var(--muted);font-size:11px;display:flex;gap:12px;align-items:center;justify-content:space-between}
  .legend{display:flex;gap:10px;align-items:center}
  .chip{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;border:1px solid var(--line);font-size:11px;background:rgba(255,255,255,.04)}
  #histPanel{margin:8px 16px 16px;background:linear-gradient(180deg,#101f2e,#0c1a28);border:1px solid var(--line);border-radius:14px;padding:12px}
  #histHeader{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
  #histHeader .title{font-size:16px}
  #histBtns{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}
  #histFilters{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:6px}
  #histChart{width:100%;height:220px;margin-top:8px}
  table.hist{width:100%;border-collapse:collapse;margin-top:8px;font-size:12px}
  table.hist th,table.hist td{border-bottom:1px solid var(--line);padding:6px 8px;text-align:right}
  table.hist th:first-child,table.hist td:first-child{text-align:left}
  table.hist tbody tr:hover{background:#0e2236}
  .diffPos{color:#16a34a} .diffNeg{color:#ef4444} .diffZero{color:#a6b8c9}

  @media print{
    header, footer, #totales, #grid{ display:none !important }
    body{ background:#fff; color:#111; }
    #histPanel{ border:0; background:#fff; color:#111; }
    .pill{ border:0; background:#eee; color:#222; }
    #histChart{ height:300px }
  }

"+css+"
/* Segunda l√≠nea del header */
.h-sub{display:flex;align-items:center;gap:12px;padding:8px 16px;border-top:1px solid #e6e9ee;background:#fff;color:#0b1220}
.h-sub .chk-all{display:inline-flex;align-items:center;gap:8px;font-size:13px}
.h-sub input[type="checkbox"]{width:16px;height:16px;accent-color:#0b1220}

.almacenSection{margin:14px 16px; padding:12px; background:linear-gradient(180deg,#101f2e,#0c1a28); border:1px solid var(--line); border-radius:16px;}
.almacenTitle{font-size:16px; font-weight:700; margin:0 0 8px 0; color:#e7eef6}

/* Perf hints */
.liquid{ will-change: height; }
.pct{ will-change: contents; }
.status .dot{ will-change: background; }
.card{ contain: content; }

/* Warning icon for Bajo (0-20%) */
.status .warn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width: 16px;
  height: 16px;
  line-height: 16px;
  font-size: 14px;
  font-weight: 700;
  color:#ef4444;
  background: transparent;
}
